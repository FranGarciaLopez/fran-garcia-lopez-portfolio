---
import aboutData from "../data/about.json";
const { lang } = Astro.props as { lang: "es" | "en" };
---

<section
  id="academic"
  class="flex flex-col w-full px-6 md:px-16 lg:px-24 xl:px-32 mb-20 mx-auto max-w-7xl items-start space-y-10"
>
  <div class="space-y-4">
    <h2
      class="text-5xl sm:text-6xl md:text-7xl lg:text-8xl font-serif text-[#f5f5dc] leading-tight tracking-tight animate-fade-in"
    >
      {aboutData.title[lang]}
    </h2>
    <h3
      class="text-xl sm:text-2xl md:text-3xl text-[#c2b280] font-light tracking-wide"
    >
      {aboutData.subtitle[lang]}
    </h3>
    <div
      class="h-1 w-24 bg-gradient-to-r from-[#c2b280] to-transparent"
    >
    </div>
    <p
      class="text-lg sm:text-xl text-gray-300 leading-relaxed max-w-3xl"
    >
      {aboutData.introduction[lang]}
    </p>
  </div>


  <div class="w-full mt-10 space-y-12">
    {
      aboutData.classified_files.map((file, index) => (
        <article class="border-2 border-[#c2b280]/30 bg-gradient-to-br from-black/40 to-black/20 backdrop-blur-md rounded-2xl shadow-xl overflow-hidden hover:border-[#c2b280]/60 hover:shadow-2xl transition-all duration-300">
          <div class="p-6 sm:p-8 border-b border-[#c2b280]/20 bg-gradient-to-r from-[#c2b280]/10 to-transparent">
            <div class="flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4 mb-4">
              <div class="flex items-center gap-4">

                <span class="text-4xl sm:text-5xl" aria-hidden="true">{file.icon}</span>
                <div>
                  <h3 class="font-serif text-2xl sm:text-3xl text-[#f5f5dc] mb-2">
                    {file.title[lang]}
                  </h3>
                  {file.institution && (
                    <p class="text-[#c2b280] text-lg font-medium">
                      {file.institution[lang]}
                    </p>
                  )}
                </div>
              </div>
              <div class="flex items-center gap-2 text-[#c2b280] font-semibold text-lg whitespace-nowrap">
                {/* El SVG es puramente decorativo, añadir aria-hidden */}
                <svg
                  class="w-5 h-5"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  aria-hidden="true"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
                  />
                </svg>
                <time datetime={String(file.year)}>{file.year}</time>
              </div>
            </div>
          </div>

          <div class="p-6 sm:p-8 space-y-6">
            <p class="text-base sm:text-lg leading-relaxed text-gray-300 font-light">
              {file.content[lang]}
            </p>

            {file.skills && file.skills.length > 0 && (
              <div class="pt-4">
                <h4 class="text-[#c2b280] font-semibold mb-4 text-lg sm:text-xl flex items-center gap-2">
                  {file.skills_title[lang]}
                </h4>
                <div class="flex flex-wrap gap-2 sm:gap-3">
                  {file.skills.map((skill) => (
                    <span class="px-4 py-2 bg-[#c2b280]/20 border border-[#c2b280]/40 rounded-full text-sm sm:text-base text-[#f5f5dc] hover:bg-[#c2b280]/30 hover:scale-105 transition-all duration-200 cursor-default">
                      {skill}
                    </span>
                  ))}
                </div>
              </div>
            )}
          </div>
        </article>
      ))
    }
  </div>

  <!-- CTA Section - 2 columns on large screens -->
  <div class="w-full grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12 items-center mt-16">
    <!-- Profile Image -->
    <div class="flex justify-center lg:justify-end">
      <div class="relative w-48 h-48 sm:w-64 sm:h-64 md:w-72 md:h-72 rounded-full overflow-hidden">
        <img
          src="/images/profile.webp"
          alt="Profile picture of Fran García López"
          class="w-full h-full object-cover"
          draggable="false"
          width="288" 
          height="288"
          loading="lazy"
        />
        <div class="absolute inset-0 rounded-full ring-4 ring-[#c2b280]/30 ring-offset-4 ring-offset-black"></div>
      </div>
    </div>

    <!-- Email Button -->
    <div class="flex justify-center lg:justify-start">
      <a
        href="mailto:frangalo34@gmail.com?subject=Hello%20Fran!&body=Hi%20Fran,%0D%0A%0D%0AI%20came%20across%20your%20portfolio%20and%20wanted%20to%20reach%20out.%0D%0A%0D%0ARegards,%0D%0A[Your%20Name]"
        class="group relative inline-flex items-center gap-3 px-8 py-4 text-lg font-bold text-black bg-gradient-to-r from-[#c2b280] to-[#d4c19c] rounded-xl shadow-lg hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300 focus:ring-4 focus:ring-[#c2b280]/50 overflow-hidden"
        aria-label={aboutData.email_button[lang] + " (Opens email client)"}
      >
        <span class="relative z-10 flex items-center gap-2">
          {/* El SVG es puramente decorativo, añadir aria-hidden */}
          <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
            <path
              d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"
            ></path>
            <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"
            ></path>
          </svg>
          {aboutData.email_button[lang]}
        </span>
        <span
          class="absolute inset-0 bg-gradient-to-r from-[#bca177] to-[#c2b280] translate-y-full group-hover:translate-y-0 transition-transform duration-300"
        ></span>
      </a>
    </div>
  </div>
</section>