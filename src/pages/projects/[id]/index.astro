---
import type { GetStaticPaths } from "astro";
import projectData from "../../../data/projects.json";
import ProjectFeatures from "../../../components/ProjectsFeatures.astro";
import NavBar from "../../../components/NavBar.astro";
import BentoGrid from "../../../components/BentoGrid.astro";

export const getStaticPaths: GetStaticPaths = async () => {
          return projectData.projects.map((project) => ({
                    params: { id: project.id.toString() },
                    props: { project },
          }));
};

interface AlgorithmFeature {
          description: string;
          benefits?: string[];
          steps?: string[];
}

interface Project {
          id: string;
          name: string;
          images: string;
          description: { text: string }[];
          role: string;
          institution: string;
          timeframe: string;
          algorithm_features?: {
                    dynamic_grouping?: AlgorithmFeature;
                    group_formation_process?: AlgorithmFeature;
                    unique_event_assignment?: AlgorithmFeature;
                    data_persistence?: AlgorithmFeature;
          };
          url: string;
}

const { project } = Astro.props as { project: Project };
---

<section
          class="relative min-h-screen bg-[#222428] text-white py-8 sm:py-12 px-4 sm:px-6 lg:px-12 xl:px-20"
>
          <div class="max-w-4xl lg:max-w-6xl xl:max-w-7xl mx-auto">
                    <!-- Back arrow -->
                    <button
                              type="button"
                              class="text-[#eae0d5] rounded-xl py-2 px-4 hover:bg-[#c2b280] hover:text-black transition-all duration-300 flex items-center"
                              onclick="window.history.back()"
                    >
                              <svg
                                        class="w-5 h-5 sm:w-6 sm:h-6"
                                        fill="currentColor"
                                        viewBox="0 0 20 20"
                                        xmlns="http://www.w3.org/2000/svg"
                              >
                                        <path
                                                  fill-rule="evenodd"
                                                  d="M7.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l2.293 2.293a1 1 0 010 1.414z"
                                                  clip-rule="evenodd"></path>
                              </svg>
                    </button>

                    <!-- Project Title -->
                    <h1
                              class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl xl:text-7xl
            font-serif leading-tight tracking-wide
            text-[#f5f5dc] uppercase text-start
            mt-4 sm:mt-6"
                    >
                              {project.name}
                    </h1>

                    <div class="mt-4 sm:mt-6 leading-relaxed text-start">
                              {
                                        project.description.map((desc) => (
                                                  <p
                                                            class="py-2 text-sm sm:text-base md:text-lg 
                        tracking-wide text-[#eae0d5]"
                                                  >
                                                            {desc.text}
                                                  </p>
                                        ))
                              }
                    </div>

                    <!-- Project Images -->
                    <BentoGrid
                              project_images={project.images}
                              class="mt-6 sm:mt-8"
                    />

                    <!-- Project Features -->
                    {
                              project.algorithm_features && (
                                        <div class="my-8 sm:my-12">
                                                  <ProjectFeatures
                                                            algorithm_features={
                                                                      project.algorithm_features
                                                            }
                                                  />
                                        </div>
                              )
                    }

                    <!-- Additional Details -->
                    <div
                              class="text-[#c2b280] text-start border-t border-[#44484d] pt-6
            grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4
            gap-4 sm:gap-6 lg:gap-8"
                    >
                              <p>
                                        <strong class="text-[#f5f5dc]"
                                                  >Role:</strong
                                        >
                                        {project.role}
                              </p>
                              <p>
                                        <strong class="text-[#f5f5dc]"
                                                  >Institution:</strong
                                        >
                                        {
                                                  project.institution.includes(
                                                            "MiduDev",
                                                  ) ? (
                                                            <span class="text-[#c2b280] font-bold">
                                                                      Inspired
                                                                      by
                                                                      MiduDev's
                                                                      tutorial
                                                            </span>
                                                  ) : (
                                                            <span class="text-[#fcb700]">
                                                                      {
                                                                                project.institution
                                                                      }
                                                            </span>
                                                  )
                                        }
                              </p>
                              <p>
                                        <strong class="text-[#f5f5dc]"
                                                  >Timeframe:</strong
                                        >
                                        {project.timeframe}
                              </p>
                              <!-- Link to the project -->
                              <div class="mt-4 sm:mt-0">
                                        <a
                                                  href={project.url}
                                                  class="inline-block px-4 sm:px-6 md:px-8 py-2 sm:py-3
                    text-black bg-[#eae0d5] rounded-lg
                    hover:bg-[#c2b280] transition-all text-sm sm:text-base"
                                        >
                                                  Check the Project
                                        </a>
                              </div>
                    </div>
          </div>
</section>
